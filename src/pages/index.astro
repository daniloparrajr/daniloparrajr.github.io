---
import { getCollection } from "astro:content";

// component imports
import MainLayout from "@layouts/MainLayout.astro";
import PostList from "@components/PostList.astro";
import SocialMenu from "@components/SocialMenu.astro";
import Avatar from "@components/Avatar.astro";

// utils imports
import { filterPosts } from "@utils/posts";

const allPosts = await getCollection("blog");
const recentPosts = filterPosts(allPosts, {
  limit: 3,
});
---

<MainLayout name="index">
  <section aria-label="New Blog Posts">
    <div class="js-animate-content">
      <Avatar />

      <h1 class="text-3xl leading-normal sm:leading-normal sm:text-4xl mb-5">
        Web developer, forever student, and a fitness enthusiast.
      </h1>

      <p class="mb-6">
        Hi, I'm Danilo! Welcome to my personal space in the internet, where I
        write my learning and thoughts about all things web development.
      </p>

      <SocialMenu classes="mb-16 sm:mb-20" />
    </div>
    <section class="js-animate-content">
      <h2 class="mb-5 sm:mb-8 text-2xl">Recent Articles</h2>
      <PostList posts={recentPosts} />
    </section>
  </section>
</MainLayout>
