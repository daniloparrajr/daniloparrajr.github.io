---
title: wordpress/scripts advanced usage
description: Learn how to add external scripts, multiple entry points, remove empty scripts, and add css browser prefix on @wordpress/scripts
date: 2024-04-04
draft: true
tags: ["WordPress"]
---

import ExternalLink from "@components/ExternalLink.astro";
import WideContent from "@components/WideContent.astro";

## Introduction

@wordpress/scripts is the toolbox of a WordPress developer, it is a collection of reusable scripts that is commonly used in WordPress development.

This includes scripts for linting, formatting, testing, bundling, and more. To learn more about all the capabilities of @wordpress/scripts, check the <ExternalLink text="official documentation" href="https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/" />.

## Extending the default configuration

The `build` and `start` commands use <ExternalLink text="webpack" href="https://webpack.js.org/" /> under the hood, a popular module bundler widely used on web development.

@wordpress/scripts allows us to extend the default configuration by either the `--config` argument or by a creating a `webpack.config.js` or `webpack.config.babel.js` file.

To properly extend the default config, we will need to import the default config and export the custom config.

<WideContent>
```js
const defaultConfig = require('@wordpress/scripts/config/webpack.config');

const customConfig = {
    ...defaultConfig
};

module.exports customConfig;
```
</WideContent>

## External scripts dependencies

If your block depends on an external script e.g. jquery, @wordpress/scripts provided the `DependencyExtractionWebpackPlugin` to manage external dependencies.

This plugin is included on the default configuration, and it should only have one instance, so you would need to remove and add it again to the config.

<WideContent>
```js
const defaultConfig = require('@wordpress/scripts/config/webpack.config');
const DependencyExtractionWebpackPlugin = require('@wordpress/dependency-extraction-webpack-plugin');

/**
 * Externalize 'scripts' that are registered outside the plugin
 *
 * @param {string} request Requested module
 *
 * @return {(string|undefined)} Script global
 */
function requestToExternal(request) {
    if (request === 'jquery') {
        return 'jQuery';
    }
}

const customConfig = {
    ...defaultConfig,
    plugins: [
            // Remove the default DependencyExtractionWebpackPlugin instance
            ...defaultConfig.plugins.filter(
                (plugin) => plugin.constructor.name !== 'DependencyExtractionWebpackPlugin'
            ),
            // New instance with custom configuration
            new DependencyExtractionWebpackPlugin({requestToExternal}),
    ],
}

modules.export = customConfig;
```
</WideContent>

## Additional entry points

wordpress/scripts initially is meant for block development but in case you want to include a custom css or custom js file.
You'll have to add additional entry points for your files.

```js
const defaultConfig = require("@wordpress/scripts/config/webpack.config");
const { getWebpackEntryPoints } = require("@wordpress/scripts/utils/config");

// Plugins.
const RemoveEmptyScriptsPlugin = require( 'webpack-remove-empty-scripts' );

// Utilities.
const path = require( 'path' );

const config = {
	...defaultConfig,
	entry: {
		...getWebpackEntryPoints(),
        'js/editor':  path.resolve( process.cwd(), 'resources/js',   'editor.js'   ),
        'css/screen': path.resolve( process.cwd(), 'resources/scss', 'screen.scss' ),
	},
    plugins: [
        // Include WP's plugin config.
        ...defaultConfig.plugins,

        // Removes the empty `.js` files generated by webpack but
        // sets it after WP has generated its `*.asset.php` file.
        new RemoveEmptyScriptsPlugin( {
            stage: RemoveEmptyScriptsPlugin.STAGE_AFTER_PROCESS_PLUGINS
        } )
    ]
};

module.exports = config;

```